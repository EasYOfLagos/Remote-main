(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46132,e=>{"use strict";let t="http://127.0.0.1:8000",r=async e=>(await fetch(`${t}/api/users/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),a=async e=>(await fetch(`${t}/api/token/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),s=async e=>{let r=await fetch(`${t}/api/jobs/${e}/`);if(!r.ok)throw Error("Failed to fetch job");return r.json()},o=async(e,r)=>{let a,s=new FormData;s.append("job",e.job),s.append("cover_letter",e.cover_letter),e.resume&&s.append("resume",e.resume);let o={};r&&(o.Authorization=`Bearer ${r}`);let l=await fetch(`${t}/api/applications/create/`,{method:"POST",headers:o,body:s});try{a=await l.json()}catch(t){let e=await l.text();console.error("Non-JSON response from server:",e),a={error:"Invalid JSON response from server",raw:e}}if(!l.ok)throw a;return a};e.s(["createApplication",0,o,"getJob",0,s,"loginUser",0,a,"signupUser",0,r])},32863,e=>{"use strict";var t=e.i(70839),r=e.i(70267),a=e.i(67839),s=e.i(46132);function o(){let{id:e}=(0,r.useParams)(),o=(0,r.useRouter)(),[l,i]=(0,a.useState)(null),[n,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1),[b,h]=(0,a.useState)("");(0,a.useEffect)(()=>{let t=async()=>{try{let t=await (0,s.getJob)(e);i(t)}catch(e){console.error("Error fetching job:",e)}};e&&t()},[e]);let f=async t=>{t.preventDefault(),m(!0),h("");try{await (0,s.createApplication)({job:e,cover_letter:n,resume:u},null),h("✅ Application submitted successfully!"),setTimeout(()=>o.push("/jobs"),2e3)}catch(e){console.error("Error submitting application:",e),h(e.error||"❌ Failed to submit application. Please try again.")}finally{m(!1)}};return l?(0,t.jsxs)("section",{className:"max-w-xl mx-auto py-12 px-6",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-6",children:["Apply for ",l.title]}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1",children:"Cover Letter"}),(0,t.jsx)("textarea",{value:n,onChange:e=>c(e.target.value),required:!0,rows:5,className:"w-full border p-3 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1",children:"Upload Resume"}),(0,t.jsx)("input",{type:"file",onChange:e=>p(e.target.files[0]),required:!0,className:"w-full border p-2 rounded-lg"})]}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white py-3 rounded-xl",children:d?"Submitting...":"Submit Application"})]}),b&&(0,t.jsx)("p",{className:"mt-4 text-center",children:b})]}):(0,t.jsx)("p",{className:"text-center mt-20",children:"Loading job details..."})}e.s(["default",()=>o])}]);