{"version":3,"sources":["turbopack:///[project]/my-app/utils/api.js","turbopack:///[project]/my-app/app/login/page.jsx"],"sourcesContent":["const BASE_URL = \"http://127.0.0.1:8000\";\r\n\r\n// ------------------ USERS ------------------\r\n\r\n// Signup\r\nexport const signupUser = async (data) => {\r\n  const res = await fetch(`${BASE_URL}/api/users/create/`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n};\r\n\r\n// Login\r\nexport const loginUser = async (data) => {\r\n  const res = await fetch(`${BASE_URL}/api/token/`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n};\r\n\r\n// Get all users\r\nexport const getAllUsers = async () => {\r\n  const res = await fetch(`${BASE_URL}/api/users/all/`);\r\n  return res.json();\r\n};\r\n\r\n// Get single user\r\nexport const getUser = async (id) => {\r\n  const res = await fetch(`${BASE_URL}/api/users/${id}/`);\r\n  return res.json();\r\n};\r\n\r\n// ------------------ JOBS ------------------\r\n\r\n// Create a job\r\nexport const createJob = async (data, token) => {\r\n  const res = await fetch(`${BASE_URL}/api/jobs/create/`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n};\r\n\r\n// Get all jobs\r\nexport const getAllJobs = async () => {\r\n  const res = await fetch(`${BASE_URL}/api/jobs/all/`);\r\n  return res.json();\r\n};\r\n\r\n// Get single job\r\nexport const getJob = async (id) => {\r\n  const res = await fetch(`${BASE_URL}/api/jobs/${id}/`);\r\n  if (!res.ok) throw new Error(\"Failed to fetch job\");\r\n  return res.json();\r\n};\r\n\r\n// ------------------ APPLICATIONS ------------------\r\n\r\n// Apply for a job (public or logged-in)\r\nexport const createApplication = async (data, token) => {\r\n  const formData = new FormData();\r\n  formData.append(\"job\", data.job);\r\n  formData.append(\"cover_letter\", data.cover_letter);\r\n  if (data.resume) formData.append(\"resume\", data.resume);\r\n\r\n  const headers = {};\r\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\r\n\r\n  const res = await fetch(`${BASE_URL}/api/applications/create/`, {\r\n    method: \"POST\",\r\n    headers,\r\n    body: formData,\r\n  });\r\n\r\n  let responseData;\r\n  try {\r\n    responseData = await res.json();\r\n  } catch (err) {\r\n    const text = await res.text();\r\n    console.error(\"Non-JSON response from server:\", text);\r\n    responseData = { error: \"Invalid JSON response from server\", raw: text };\r\n  }\r\n\r\n  if (!res.ok) throw responseData;\r\n  return responseData;\r\n};\r\n\r\n// Get all applications\r\nexport const getAllApplications = async () => {\r\n  const res = await fetch(`${BASE_URL}/api/applications/all/`);\r\n  return res.json();\r\n};\r\n\r\n// Get single application\r\nexport const getApplication = async (id) => {\r\n  const res = await fetch(`${BASE_URL}/api/applications/${id}/`);\r\n  return res.json();\r\n};\r\n\r\n// Update an application\r\nexport const updateApplication = async (id, data) => {\r\n  const formData = new FormData();\r\n  if (data.cover_letter) formData.append(\"cover_letter\", data.cover_letter);\r\n  if (data.resume) formData.append(\"resume\", data.resume);\r\n\r\n  const res = await fetch(`${BASE_URL}/api/applications/${id}/`, {\r\n    method: \"PUT\",\r\n    body: formData,\r\n  });\r\n\r\n  let responseData;\r\n  try {\r\n    responseData = await res.json();\r\n  } catch (err) {\r\n    const text = await res.text();\r\n    console.error(\"Non-JSON response from server:\", text);\r\n    responseData = { error: \"Invalid JSON response from server\", raw: text };\r\n  }\r\n\r\n  if (!res.ok) throw responseData;\r\n  return responseData;\r\n};\r\n\r\n// Delete an application\r\nexport const deleteApplication = async (id) => {\r\n  const res = await fetch(`${BASE_URL}/api/applications/${id}/`, {\r\n    method: \"DELETE\",\r\n  });\r\n  if (!res.ok) {\r\n    const text = await res.text();\r\n    throw { error: \"Failed to delete application\", raw: text };\r\n  }\r\n  return { message: \"Deleted successfully\" };\r\n};\r\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { loginUser } from \"../../utils/api\"; \r\n\r\nexport default function LoginPage() {\r\n  const [formData, setFormData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // handle input\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  // handle login\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await loginUser(formData);\r\n\r\n      if (res.access) {\r\n        console.log(\"Login success:\", res);\r\n        alert(\"Login successful!\");\r\n        localStorage.setItem(\"accessToken\", res.access);\r\n        localStorage.setItem(\"refreshToken\", res.refresh);\r\n        window.location.href = \"/\";\r\n      } else {\r\n        setError(\"Invalid username or password\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Something went wrong. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 px-4\">\r\n      <div className=\"bg-white p-8 rounded-2xl shadow-md w-full max-w-md\">\r\n        <h2 className=\"text-3xl font-bold text-center text-blue-700 mb-6\">\r\n          Welcome Back ðŸ‘‹\r\n        </h2>\r\n\r\n        <form className=\"space-y-5\" onSubmit={handleLogin}>\r\n          {/* Username */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Username\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              value={formData.username}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter your username\"\r\n              className=\"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Password */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Password\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n              placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\r\n              className=\"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {error && <p className=\"text-red-500 text-sm\">{error}</p>}\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition\"\r\n          >\r\n            {loading ? \"Signing in...\" : \"Sign In\"}\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"text-center text-gray-600 mt-6\">\r\n          Donâ€™t have an account?{\" \"}\r\n          <Link\r\n            href=\"/signup\"\r\n            className=\"text-blue-600 font-medium hover:underline\"\r\n          >\r\n            Create one\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}