{"version":3,"sources":["turbopack:///[project]/my-app/utils/api.js","turbopack:///[project]/my-app/app/jobs/[id]/page.jsx"],"sourcesContent":["const BASE_URL = \"http://127.0.0.1:8000\";\r\n\r\n// ------------------ USERS ------------------\r\n\r\n// Signup\r\nexport const signupUser = async (data) => {\r\n  const res = await fetch(`${BASE_URL}/api/users/create/`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n};\r\n\r\n// Login\r\nexport const loginUser = async (data) => {\r\n  const res = await fetch(`${BASE_URL}/api/token/`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n};\r\n\r\n// Get all users\r\nexport const getAllUsers = async () => {\r\n  const res = await fetch(`${BASE_URL}/api/users/all/`);\r\n  return res.json();\r\n};\r\n\r\n// Get single user\r\nexport const getUser = async (id) => {\r\n  const res = await fetch(`${BASE_URL}/api/users/${id}/`);\r\n  return res.json();\r\n};\r\n\r\n// ------------------ JOBS ------------------\r\n\r\n// Create a job\r\nexport const createJob = async (data, token) => {\r\n  const res = await fetch(`${BASE_URL}/api/jobs/create/`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n};\r\n\r\n// Get all jobs\r\nexport const getAllJobs = async () => {\r\n  const res = await fetch(`${BASE_URL}/api/jobs/all/`);\r\n  return res.json();\r\n};\r\n\r\n// Get single job\r\nexport const getJob = async (id) => {\r\n  const res = await fetch(`${BASE_URL}/api/jobs/${id}/`);\r\n  if (!res.ok) throw new Error(\"Failed to fetch job\");\r\n  return res.json();\r\n};\r\n\r\n// ------------------ APPLICATIONS ------------------\r\n\r\n// Apply for a job (public or logged-in)\r\nexport const createApplication = async (data, token) => {\r\n  const formData = new FormData();\r\n  formData.append(\"job\", data.job);\r\n  formData.append(\"cover_letter\", data.cover_letter);\r\n  if (data.resume) formData.append(\"resume\", data.resume);\r\n\r\n  const headers = {};\r\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\r\n\r\n  const res = await fetch(`${BASE_URL}/api/applications/create/`, {\r\n    method: \"POST\",\r\n    headers,\r\n    body: formData,\r\n  });\r\n\r\n  let responseData;\r\n  try {\r\n    responseData = await res.json();\r\n  } catch (err) {\r\n    const text = await res.text();\r\n    console.error(\"Non-JSON response from server:\", text);\r\n    responseData = { error: \"Invalid JSON response from server\", raw: text };\r\n  }\r\n\r\n  if (!res.ok) throw responseData;\r\n  return responseData;\r\n};\r\n\r\n// Get all applications\r\nexport const getAllApplications = async () => {\r\n  const res = await fetch(`${BASE_URL}/api/applications/all/`);\r\n  return res.json();\r\n};\r\n\r\n// Get single application\r\nexport const getApplication = async (id) => {\r\n  const res = await fetch(`${BASE_URL}/api/applications/${id}/`);\r\n  return res.json();\r\n};\r\n\r\n// Update an application\r\nexport const updateApplication = async (id, data) => {\r\n  const formData = new FormData();\r\n  if (data.cover_letter) formData.append(\"cover_letter\", data.cover_letter);\r\n  if (data.resume) formData.append(\"resume\", data.resume);\r\n\r\n  const res = await fetch(`${BASE_URL}/api/applications/${id}/`, {\r\n    method: \"PUT\",\r\n    body: formData,\r\n  });\r\n\r\n  let responseData;\r\n  try {\r\n    responseData = await res.json();\r\n  } catch (err) {\r\n    const text = await res.text();\r\n    console.error(\"Non-JSON response from server:\", text);\r\n    responseData = { error: \"Invalid JSON response from server\", raw: text };\r\n  }\r\n\r\n  if (!res.ok) throw responseData;\r\n  return responseData;\r\n};\r\n\r\n// Delete an application\r\nexport const deleteApplication = async (id) => {\r\n  const res = await fetch(`${BASE_URL}/api/applications/${id}/`, {\r\n    method: \"DELETE\",\r\n  });\r\n  if (!res.ok) {\r\n    const text = await res.text();\r\n    throw { error: \"Failed to delete application\", raw: text };\r\n  }\r\n  return { message: \"Deleted successfully\" };\r\n};\r\n","\"use client\";\r\nimport Link from \"next/link\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getJob } from \"@/utils/api\";\r\n\r\nexport default function JobDetails() {\r\n    const { id } = useParams();\r\n    const router = useRouter();\r\n    const [job, setJob] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchJob = async () => {\r\n            try {\r\n                const data = await getJob(id);\r\n                setJob(data);\r\n            } catch (error) {\r\n                console.error(\"Error fetching job details:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        if (id) fetchJob();\r\n    }, [id]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center min-h-screen text-gray-600\">\r\n                <p>Loading job details...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!job || job.detail === \"Not found.\") {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center min-h-screen text-gray-600\">\r\n                <p>Job not found.</p>\r\n                <button\r\n                    onClick={() => router.push(\"/jobs\")}\r\n                    className=\"text-blue-600 mt-4 hover:underline\"\r\n                >\r\n                    ‚Üê Back to jobs\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <section className=\"max-w-3xl mx-auto py-12 px-6\">\r\n            <button\r\n                onClick={() => router.back()}\r\n                className=\"text-blue-600 hover:underline mb-6\"\r\n            >\r\n                ‚Üê Back to jobs\r\n            </button>\r\n\r\n            <div className=\"bg-white shadow-md rounded-2xl p-8\">\r\n                <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{job.title}</h1>\r\n                <p className=\"text-gray-600 mb-4\">\r\n                    {job.company_name} ‚Ä¢ {job.location} ‚Ä¢{\" \"}\r\n                    {job.job_type?.replace(\"_\", \" \").toUpperCase()}\r\n                </p>\r\n\r\n                <div className=\"mb-4\">\r\n                    <h2 className=\"text-lg font-semibold text-gray-800 mb-2\">Description</h2>\r\n                    <p className=\"text-gray-700 leading-relaxed\">{job.description}</p>\r\n                </div>\r\n\r\n                {job.salary && (\r\n                    <p className=\"font-medium text-gray-900 mb-4\">\r\n                        üí∞ <span className=\"text-blue-600\">‚Ç¶{job.salary}</span>\r\n                    </p>\r\n                )}\r\n\r\n                <div className=\"flex items-center justify-end mt-6\">\r\n                    <Link\r\n                        href={`/jobs/${job.id}/apply`}\r\n                        className=\"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition\"\r\n                    >\r\n                        Apply Now\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}